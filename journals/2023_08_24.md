# 徳丸本
- ## 4章 Webアプリケーションの機能別に見るセキュリティバグ(続き)
- ### 4.12 ファイルアップロードにまつわる問題
- #### 4.12.1 ファイルアップロードの問題の概要
	- アップロード機能に対するDoS攻撃
		- アップロードファイルの容量制限が有効
		- 容量制限ではないが、Webサーバでリクエストボディのサイズを制限することが出来る
			- 早い段階で制限をすることが出来る
			- Nginxの場合はnginx.confの`client_max_body_size`を設定([参考](https://www.tecmint.com/limit-file-upload-size-in-nginx/))
			- Apacheの場合は.htaccess or httpd.confの`LimitRequestBody`を設定([参考](https://ubiq.co/tech-blog/increase-file-upload-size-apache/))
	- アップロードされたファイルをサーバ上のスクリプトとして実行する攻撃(4.12.2)
	- 仕掛けを含むファイルを利用者にダウンロードさせる攻撃(4.12.3)
	- 閲覧権限のないファイルのダウンロード
		- アクセス制限の不足やアップロードされたURLの推測が原因
		- 昨日書いたように、ダウンロードURLに署名を施した署名付きURLをLocationヘッダにセットしたレスポンスを返すAPIを作り、そのAPIにアクセス制限を設けるのが良さそう