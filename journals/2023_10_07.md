# SC過去問
- ## 午前II
	- https://www.sc-siken.com/ で勉強したことを箇条書きする
	- サイドチャネル攻撃([参考](https://ictsol.altech.jp/column/about-side-channel-attack.html))
		- 攻撃対象のハードウェアを物理的に観測することで、内部の秘匿された情報を得る攻撃
		- サイドチャネルは非正規の入出力経路という意味
	- VA(Validation Authority)([参考](https://www.sc-siken.com/kakomon/01_aki/am2_3.html))
		- PKIを構成する機関で、クライアントから証明書の有効性に関する問い合わせに応答する
		- 以下の役割を持つ
			- CAの公開鍵で署名を検証
			- 証明書の有効期限を確認
			- CRLの集中管理
			- CRLを確認
		- CRLってCAが管理するもの & CRLを確認するのは証明書を扱うソフトウェアの仕事だと思ってたけど違う?
	- 秘密鍵の漏洩などで、使えなくなった証明書は有効期限内であってもCRLに登録されることがある
	- OCSP([参考](https://www.sc-siken.com/kakomon/03_haru/am2_2.html))
		- Online Certificate Status Protocolの略
		- リアルタイムでデジタル証明書の失効情報を検証し、有効性を確認するプロトコル
	- ダイナミックパケットフィルタリング([参考](https://xtech.nikkei.com/it/atcl/column/17/021700034/021700003/))
		- ファイアウォールのパケットフィルタリング方式の一種で、内部から発信したパケットに対する応答パケットを通過させるようなルールが一時的に追加され、通過したらルールが削除されるというもの
	- SPF, DKIM, DMARCについて([参考](https://www.kagoya.jp/howto/it-glossary/mail/dkim/))
		- なりすましメール(より広義にはメールの改竄)を検知するための技術
		- SPF(Sender Policy Framework)
			- 送信側はDNSサーバにTXTレコードを登録しておく
				- TXTレコードで正当なメールサーバのIPアドレスを示す(このようなTXTレコードをSPFレコードと呼ぶ)([参考](https://wa3.i-3-i.info/word12294.html))
			- 受信側はDNSサーバに問い合わせを行い、SPFレコードに書かれたIPアドレスと送信元IPアドレスを比較する
		- DKIM(DomainKeys Identified Mail)
			- 送信側はDNSサーバにTXTレコードで公開鍵を([参考](https://support.kaspersky.com/ksmg/2.0/ja-jp/102272.htm))、メールサーバに秘密鍵を登録しておく
			- メールサーバはメールの送信時、秘密鍵で作成した電子署名を付与し、メールを送信する
			- 受信側はDNSサーバに問い合わせを行い、公開鍵を取得し署名を検証する
			- SPFでは送信元の正当性しか確認出来なかったが、DKIMではメールの本文が改竄されていないかもチェック出来る
		- DMARC(Domain based Message Authentication, Reporting, and Conformance)
			- 送信側はDNSサーバにTXTレコードで、SPF/DKIMの検証に失敗した時のメールの処理方法を登録しておく([参考](https://www.cloudflare.com/ja-jp/learning/dns/dns-records/dns-dmarc-record/))
			- 受信側はSPF/DKIMの検証に失敗した時、DNSサーバに問い合わせを行い、DMARCレコードで指定された処理を行う
			- SPFやDKIMでは検証に失敗した時の処理は受信側に任されてしまい、検証に失敗したとしても受信してしまうことがあるらしい(それは受信側の責任ではという感じがするが...)
	- マルチベクトル型DDoS攻撃
		- 複数のDDoS攻撃手法を組み合わせて標的のサービス停止を狙う攻撃
		- SYN Flood攻撃とHTTP POST Flood攻撃を同時にするなど
	- DNSSEC([参考](https://www.nic.ad.jp/ja/newsletter/No40/0800.html))
		- DNSキャッシュポイズニングの対策
		- 権威サーバによって応答に電子署名が行われ、キャッシュサーバがその署名を検証する
	- オクテットとは8ビットを示す単位のこと([参考](https://jprs.jp/glossary/index.php?ID=0178))
		- 昔はバイトが8ビットに固定されていなかったので、8ビットであることを明確に表すためオクテットが使われる
	- フォールトレランス、フェールソフト、フェールセーフ、フールプルーフ([参考](https://tooljp.com/jyosho/docs/faulttolerance/faulttolerance.html))
		- フォールトレランス : 障害が発生しても機能を継続させる
		- フェールソフト : 障害発生時に機能を縮小してでも継続
		- フェールセーフ : 障害発生時にシステムを安全な状態に移行
		- フールプルーフ : ユーザが誤った操作を行なっても安全に稼働させる
	- IaaSでは利用者がミドルウェアとアプリケーションの用意/管理をするが、PaaSではミドルウェアの用意/管理はサービス提供業者が行う([参考](https://www.sc-siken.com/kakomon/02_aki/am2_11.html))
	- IP25B([参考](https://wa3.i-3-i.info/word14982.html))
		- Inbound Port 25 Blockingの略
		- 動的に割り当てられたIPアドレスからの25番ポート(SMTP)に対する接続を拒否するという迷惑メール対策(SMTPサーバのIPアドレスは基本的に静的)
		- OP25Bは外部の25番ポートへの接続を制限するもの([参考](https://www.sc-siken.com/kakomon/03_haru/am2_14.html))
	- ブロードキャストアドレスには2種類ある([参考](https://xtech.nikkei.com/atcl/nxt/column/18/00780/062000008/?P=2))
		- リミテッドブロードキャストアドレス(255.255.255.255)とディレクティッドブロードキャストアドレス(ホスト部を全て1にしたアドレス、192.168.1.0/24なら192.168.1.255)
		- ディレクティッドはdirectedであり、「指定された」という意味
		- DHCPサーバからサブネットマスクを受け取る前だと、ディレクティッドブロードキャストアドレスを計算出来ないので、ブロードキャストする時はリミテッドブロードキャストアドレスを使う(DHCP DISCOVERなど)
	- リフレクタ攻撃([参考](https://www.sc-siken.com/kakomon/03_haru/am2_1.html))
		- 送信元IPアドレスを攻撃対象のサーバに偽造した問い合わせパケットを利用して、大量の応答パケットを攻撃対象に集中させて、サービス停止に追い込む攻撃
		- IPアドレスの偽造が困難なUDPを利用するDNS, Memcached, NTPが攻撃に利用されることが多い
	- CAAレコード([参考](https://jprs.jp/glossary/index.php?ID=0218))
		- ドメインに対する証明書の発行を許可する認証局を指定するためのDNSレコード
		- 証明書の誤発行や不正な証明書発行要求の検知に使う
	- デッドロックの防止策として資源の使用順序を決めておくというものがある([参考](https://www.sc-siken.com/kakomon/03_haru/am2_21.html))
		- 具体的には https://haracane.github.io/2015/04/05/mysql-deadlock/ とか
	- デジタルフォレンジックスで証拠を収集する際は、証拠の損失を避けるために揮発性の高い情報から収集する([参考](https://www.sc-siken.com/kakomon/03_aki/am2_12.html))
- ## [平成30年 午後I](https://www.ipa.go.jp/shiken/mondai-kaiotu/gmcbt8000000f01f-att/2018h30a_sc_pm1_qs.pdf)
- ### 問3
	- 設問1 NTPを用いて時刻を設定する
	- 設問2 CVSS
	- 設問3 Eサーバ上の全てのバッチプログラムを停止する
		- 解答例 : Eサーバをネットワークから切り離して、待機サーバを公開する
		- この解答例には納得だけど、自分の回答はどうなんだ?(問題がアバウトすぎる)
	- 設問4
		- 調査すべき機器 : 外部メールサーバ
		- 調査すべき内容 : サーバ内にAP1がダウンロードされているかの確認
	- 設問5
		- (1) 攻撃
		- (2) 暗号化されたHTTP通信をEサーバが持つ鍵で復号する機能
		- (3)
			- c : 外部DNSサーバ
			- d : CNAME
	- メモ
		- WAFの種類([参考1](https://it-trend.jp/waf/article/explain), [参考2](https://www.shadan-kun.com/blog/measure/5778/))
			- ソフトウェア型
				- 既存のWebサーバにソフトウェアをインストールする
				- 設定は簡単だが、Webサーバに負荷がかかる
			- ハードウェア型
				- 既存のWebサーバの手前に機器を設置する
				- ファイアウォールの設定の見直しやネットワークの再編成が必要
				- 問題にあったようにHTTPS通信を復号出来る必要がある
			- クラウド型
				- HTTPS通信のために、証明書や秘密鍵を設置する必要がある
				- DNSのAレコードのIPアドレスをWAFのIPアドレスに変更する
				- 問題にあったように、AレコードのIPアドレスの変更だと、WAFのIPアドレスが変更された時に困るから、CNAMEレコードでWAFのFQDNを設定しておくのが良い
					- お名前.comではAレコードとCNAMEレコードでホスト名は重複出来ない([参考](https://help.onamae.com/answer/7897))(出来ないのが自然)
					- 実際の運用ではいきなりDNSレコードを変更して接続出来なくなると困るから、まず、特定のPCの/etc/hostsを書き換えて、WAFを経由させて正常に動作するか確かめる